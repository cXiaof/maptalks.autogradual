/*!
 * maptalks.autogradual v0.1.0-alpha.2
 * LICENSE : MIT
 * (c) 2016-2018 maptalks.org
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.maptalks=t.maptalks||{})}(this,function(t){"use strict";var r="a-f\\d",a=new RegExp("[^#"+r+"]","gi"),c=new RegExp("^#?[a-f\\d]{3}[a-f\\d]?$|^#?[a-f\\d]{6}([a-f\\d]{2})?$","i");var f=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,r){return t(r={exports:{}},r.exports),r.exports}var u="object"==("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)&&e&&e.Object===Object&&e,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,l=u||i||Function("return this")(),s=l.Symbol,p=Object.prototype,y=p.hasOwnProperty,v=p.toString,h=s?s.toStringTag:void 0;var b=function(t){var r=y.call(t,h),e=t[h];try{var n=!(t[h]=void 0)}catch(t){}var o=v.call(t);return n&&(r?t[h]=e:delete t[h]),o},d=Object.prototype.toString;var g=function(t){return d.call(t)},_=s?s.toStringTag:void 0;var m=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":_&&_ in Object(t)?b(t):g(t)},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var S=function(t){return null!=t&&"object"==(void 0===t?"undefined":j(t))};var w=function(t){return S(t)&&"[object Arguments]"==m(t)},O=Object.prototype,A=O.hasOwnProperty,x=O.propertyIsEnumerable,E=w(function(){return arguments}())?w:function(t){return S(t)&&A.call(t,"callee")&&!x.call(t,"callee")},P=Array.isArray,z=s?s.isConcatSpreadable:void 0;var k=function(t){return P(t)||E(t)||!!(z&&t&&t[z])};var C=function t(r,e,n,o,i){var u=-1,a=r.length;for(n||(n=k),i||(i=[]);++u<a;){var c=r[u];0<e&&n(c)?1<e?t(c,e-1,n,o,i):f(i,c):o||(i[i.length]=c)}return i};var I=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o};var T=function(){this.__data__=[],this.size=0};var B=function(t,r){return t===r||t!=t&&r!=r};var $=function(t,r){for(var e=t.length;e--;)if(B(t[e][0],r))return e;return-1},F=Array.prototype.splice;var L=function(t){var r=this.__data__,e=$(r,t);return!(e<0||(e==r.length-1?r.pop():F.call(r,e,1),--this.size,0))};var M=function(t){var r=this.__data__,e=$(r,t);return e<0?void 0:r[e][1]};var R=function(t){return-1<$(this.__data__,t)};var D=function(t,r){var e=this.__data__,n=$(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function G(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}G.prototype.clear=T,G.prototype.delete=L,G.prototype.get=M,G.prototype.has=R,G.prototype.set=D;var V=G;var U=function(){this.__data__=new V,this.size=0};var N=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var W=function(t){return this.__data__.get(t)};var q=function(t){return this.__data__.has(t)},K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var H=function(t){var r=void 0===t?"undefined":K(t);return null!=t&&("object"==r||"function"==r)};var J,Q=function(t){if(!H(t))return!1;var r=m(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},X=l["__core-js_shared__"],Y=(J=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"";var Z=function(t){return!!Y&&Y in t},tt=Function.prototype.toString;var rt=function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},et=/^\[object .+?Constructor\]$/,nt=Function.prototype,ot=Object.prototype,it=nt.toString,ut=ot.hasOwnProperty,at=RegExp("^"+it.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ct=function(t){return!(!H(t)||Z(t))&&(Q(t)?at:et).test(rt(t))};var ft=function(t,r){return null==t?void 0:t[r]};var lt=function(t,r){var e=ft(t,r);return ct(e)?e:void 0},st=lt(l,"Map"),pt=lt(Object,"create");var yt=function(){this.__data__=pt?pt(null):{},this.size=0};var vt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ht=Object.prototype.hasOwnProperty;var bt=function(t){var r=this.__data__;if(pt){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return ht.call(r,t)?r[t]:void 0},dt=Object.prototype.hasOwnProperty;var gt=function(t){var r=this.__data__;return pt?void 0!==r[t]:dt.call(r,t)};var _t=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=pt&&void 0===r?"__lodash_hash_undefined__":r,this};function mt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}mt.prototype.clear=yt,mt.prototype.delete=vt,mt.prototype.get=bt,mt.prototype.has=gt,mt.prototype.set=_t;var jt=mt;var St=function(){this.size=0,this.__data__={hash:new jt,map:new(st||V),string:new jt}},wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Ot=function(t){var r=void 0===t?"undefined":wt(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var At=function(t,r){var e=t.__data__;return Ot(r)?e["string"==typeof r?"string":"hash"]:e.map};var xt=function(t){var r=At(this,t).delete(t);return this.size-=r?1:0,r};var Et=function(t){return At(this,t).get(t)};var Pt=function(t){return At(this,t).has(t)};var zt=function(t,r){var e=At(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function kt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}kt.prototype.clear=St,kt.prototype.delete=xt,kt.prototype.get=Et,kt.prototype.has=Pt,kt.prototype.set=zt;var Ct=kt;var It=function(t,r){var e=this.__data__;if(e instanceof V){var n=e.__data__;if(!st||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Ct(n)}return e.set(t,r),this.size=e.size,this};function Tt(t){var r=this.__data__=new V(t);this.size=r.size}Tt.prototype.clear=U,Tt.prototype.delete=N,Tt.prototype.get=W,Tt.prototype.has=q,Tt.prototype.set=It;var Bt=Tt;var $t=function(t){return this.__data__.has(t)};function Ft(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new Ct;++r<e;)this.add(t[r])}Ft.prototype.add=Ft.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ft.prototype.has=$t;var Lt=Ft;var Mt=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1};var Rt=function(t,r){return t.has(r)};var Dt=function(t,r,e,n,o,i){var u=1&e,a=t.length,c=r.length;if(a!=c&&!(u&&a<c))return!1;var f=i.get(t);if(f&&i.get(r))return f==r;var l=-1,s=!0,p=2&e?new Lt:void 0;for(i.set(t,r),i.set(r,t);++l<a;){var y=t[l],v=r[l];if(n)var h=u?n(v,y,l,r,t,i):n(y,v,l,t,r,i);if(void 0!==h){if(h)continue;s=!1;break}if(p){if(!Mt(r,function(t,r){if(!Rt(p,r)&&(y===t||o(y,t,e,n,i)))return p.push(r)})){s=!1;break}}else if(y!==v&&!o(y,v,e,n,i)){s=!1;break}}return i.delete(t),i.delete(r),s},Gt=l.Uint8Array;var Vt=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Ut=function(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e},Nt=s?s.prototype:void 0,Wt=Nt?Nt.valueOf:void 0;var qt=function(t,r,e,n,o,i,u){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!i(new Gt(t),new Gt(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return B(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var a=Vt;case"[object Set]":var c=1&n;if(a||(a=Ut),t.size!=r.size&&!c)return!1;var f=u.get(t);if(f)return f==r;n|=2,u.set(t,r);var l=Dt(a(t),a(r),n,o,i,u);return u.delete(t),l;case"[object Symbol]":if(Wt)return Wt.call(t)==Wt.call(r)}return!1};var Kt=function(t,r,e){var n=r(t);return P(t)?n:f(n,e(t))};var Ht=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var u=t[e];r(u,e,t)&&(i[o++]=u)}return i};var Jt=function(){return[]},Qt=Object.prototype.propertyIsEnumerable,Xt=Object.getOwnPropertySymbols,Yt=Xt?function(r){return null==r?[]:(r=Object(r),Ht(Xt(r),function(t){return Qt.call(r,t)}))}:Jt;var Zt=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var tr=function(){return!1},rr=n(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?l.Buffer:void 0,i=(o?o.isBuffer:void 0)||tr;t.exports=i}),er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr=/^(?:0|[1-9]\d*)$/;var or=function(t,r){var e=void 0===t?"undefined":er(t);return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&nr.test(t))&&-1<t&&t%1==0&&t<r};var ir=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},ur={};ur["[object Float32Array]"]=ur["[object Float64Array]"]=ur["[object Int8Array]"]=ur["[object Int16Array]"]=ur["[object Int32Array]"]=ur["[object Uint8Array]"]=ur["[object Uint8ClampedArray]"]=ur["[object Uint16Array]"]=ur["[object Uint32Array]"]=!0,ur["[object Arguments]"]=ur["[object Array]"]=ur["[object ArrayBuffer]"]=ur["[object Boolean]"]=ur["[object DataView]"]=ur["[object Date]"]=ur["[object Error]"]=ur["[object Function]"]=ur["[object Map]"]=ur["[object Number]"]=ur["[object Object]"]=ur["[object RegExp]"]=ur["[object Set]"]=ur["[object String]"]=ur["[object WeakMap]"]=!1;var ar=function(t){return S(t)&&ir(t.length)&&!!ur[m(t)]};var cr=function(r){return function(t){return r(t)}},fr=n(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&u.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),lr=fr&&fr.isTypedArray,sr=lr?cr(lr):ar,pr=Object.prototype.hasOwnProperty;var yr=function(t,r){var e=P(t),n=!e&&E(t),o=!e&&!n&&rr(t),i=!e&&!n&&!o&&sr(t),u=e||n||o||i,a=u?Zt(t.length,String):[],c=a.length;for(var f in t)!r&&!pr.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||or(f,c))||a.push(f);return a},vr=Object.prototype;var hr=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||vr)};var br=function(r,e){return function(t){return r(e(t))}}(Object.keys,Object),dr=Object.prototype.hasOwnProperty;var gr=function(t){if(!hr(t))return br(t);var r=[];for(var e in Object(t))dr.call(t,e)&&"constructor"!=e&&r.push(e);return r};var _r=function(t){return null!=t&&ir(t.length)&&!Q(t)};var mr=function(t){return _r(t)?yr(t):gr(t)};var jr=function(t){return Kt(t,mr,Yt)},Sr=Object.prototype.hasOwnProperty;var wr=function(t,r,e,n,o,i){var u=1&e,a=jr(t),c=a.length;if(c!=jr(r).length&&!u)return!1;for(var f=c;f--;){var l=a[f];if(!(u?l in r:Sr.call(r,l)))return!1}var s=i.get(t);if(s&&i.get(r))return s==r;var p=!0;i.set(t,r),i.set(r,t);for(var y=u;++f<c;){var v=t[l=a[f]],h=r[l];if(n)var b=u?n(h,v,l,r,t,i):n(v,h,l,t,r,i);if(!(void 0===b?v===h||o(v,h,e,n,i):b)){p=!1;break}y||(y="constructor"==l)}if(p&&!y){var d=t.constructor,g=r.constructor;d!=g&&"constructor"in t&&"constructor"in r&&!("function"==typeof d&&d instanceof d&&"function"==typeof g&&g instanceof g)&&(p=!1)}return i.delete(t),i.delete(r),p},Or=lt(l,"DataView"),Ar=lt(l,"Promise"),xr=lt(l,"Set"),Er=lt(l,"WeakMap"),Pr="[object Map]",zr="[object Promise]",kr="[object Set]",Cr="[object WeakMap]",Ir="[object DataView]",Tr=rt(Or),Br=rt(st),$r=rt(Ar),Fr=rt(xr),Lr=rt(Er),Mr=m;(Or&&Mr(new Or(new ArrayBuffer(1)))!=Ir||st&&Mr(new st)!=Pr||Ar&&Mr(Ar.resolve())!=zr||xr&&Mr(new xr)!=kr||Er&&Mr(new Er)!=Cr)&&(Mr=function(t){var r=m(t),e="[object Object]"==r?t.constructor:void 0,n=e?rt(e):"";if(n)switch(n){case Tr:return Ir;case Br:return Pr;case $r:return zr;case Fr:return kr;case Lr:return Cr}return r});var Rr=Mr,Dr="[object Arguments]",Gr="[object Array]",Vr="[object Object]",Ur=Object.prototype.hasOwnProperty;var Nr=function(t,r,e,n,o,i){var u=P(t),a=P(r),c=u?Gr:Rr(t),f=a?Gr:Rr(r),l=(c=c==Dr?Vr:c)==Vr,s=(f=f==Dr?Vr:f)==Vr,p=c==f;if(p&&rr(t)){if(!rr(r))return!1;l=!(u=!0)}if(p&&!l)return i||(i=new Bt),u||sr(t)?Dt(t,r,e,n,o,i):qt(t,r,c,e,n,o,i);if(!(1&e)){var y=l&&Ur.call(t,"__wrapped__"),v=s&&Ur.call(r,"__wrapped__");if(y||v){var h=y?t.value():t,b=v?r.value():r;return i||(i=new Bt),o(h,b,e,n,i)}}return!!p&&(i||(i=new Bt),wr(t,r,e,n,o,i))};var Wr=function t(r,e,n,o,i){return r===e||(null==r||null==e||!S(r)&&!S(e)?r!=r&&e!=e:Nr(r,e,n,o,t,i))};var qr=function(t,r,e,n){var o=e.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=e[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var c=(a=e[o])[0],f=t[c],l=a[1];if(u&&a[2]){if(void 0===f&&!(c in t))return!1}else{var s=new Bt;if(n)var p=n(f,l,c,t,r,s);if(!(void 0===p?Wr(l,f,3,n,s):p))return!1}}return!0};var Kr=function(t){return t==t&&!H(t)};var Hr=function(t){for(var r=mr(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,Kr(o)]}return r};var Jr=function(r,e){return function(t){return null!=t&&t[r]===e&&(void 0!==e||r in Object(t))}};var Qr=function(r){var e=Hr(r);return 1==e.length&&e[0][2]?Jr(e[0][0],e[0][1]):function(t){return t===r||qr(t,r,e)}},Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Yr=function(t){return"symbol"==(void 0===t?"undefined":Xr(t))||S(t)&&"[object Symbol]"==m(t)},Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/;var ee=function(t,r){if(P(t))return!1;var e=void 0===t?"undefined":Zr(t);return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Yr(t))||re.test(t)||!te.test(t)||null!=r&&t in Object(r)},ne="Expected a function";function oe(i,u){if("function"!=typeof i||null!=u&&"function"!=typeof u)throw new TypeError(ne);var t=function t(){var r=arguments,e=u?u.apply(this,r):r[0],n=t.cache;if(n.has(e))return n.get(e);var o=i.apply(this,r);return t.cache=n.set(e,o)||n,o};return t.cache=new(oe.Cache||Ct),t}oe.Cache=Ct;var ie=oe;var ue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/\\(\\)?/g,ce=function(t){var r=ie(t,function(t){return 500===e.size&&e.clear(),t}),e=r.cache;return r}(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(ue,function(t,r,e,n){o.push(e?n.replace(ae,"$1"):r||t)}),o}),fe=1/0,le=s?s.prototype:void 0,se=le?le.toString:void 0;var pe=function t(r){if("string"==typeof r)return r;if(P(r))return I(r,t)+"";if(Yr(r))return se?se.call(r):"";var e=r+"";return"0"==e&&1/r==-fe?"-0":e};var ye=function(t){return null==t?"":pe(t)};var ve=function(t,r){return P(t)?t:ee(t,r)?[t]:ce(ye(t))};var he=function(t){if("string"==typeof t||Yr(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var be=function(t,r){for(var e=0,n=(r=ve(r,t)).length;null!=t&&e<n;)t=t[he(r[e++])];return e&&e==n?t:void 0};var de=function(t,r,e){var n=null==t?void 0:be(t,r);return void 0===n?e:n};var ge=function(t,r){return null!=t&&r in Object(t)};var _e=function(t,r,e){for(var n=-1,o=(r=ve(r,t)).length,i=!1;++n<o;){var u=he(r[n]);if(!(i=null!=t&&e(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&ir(o)&&or(u,o)&&(P(t)||E(t))};var me=function(t,r){return null!=t&&_e(t,r,ge)};var je=function(e,n){return ee(e)&&Kr(n)?Jr(he(e),n):function(t){var r=de(t,e);return void 0===r&&r===n?me(t,e):Wr(n,r,3)}};var Se=function(t){return t};var we=function(r){return function(t){return null==t?void 0:t[r]}};var Oe=function(r){return function(t){return be(t,r)}};var Ae=function(t){return ee(t)?we(he(t)):Oe(t)},xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Ee=function(t){return"function"==typeof t?t:null==t?Se:"object"==(void 0===t?"undefined":xe(t))?P(t)?je(t[0],t[1]):Qr(t):Ae(t)};var Pe=function(c){return function(t,r,e){for(var n=-1,o=Object(t),i=e(t),u=i.length;u--;){var a=i[c?u:++n];if(!1===r(o[a],a,o))break}return t}}();var ze=function(i,u){return function(t,r){if(null==t)return t;if(!_r(t))return i(t,r);for(var e=t.length,n=u?e:-1,o=Object(t);(u?n--:++n<e)&&!1!==r(o[n],n,o););return t}}(function(t,r){return t&&Pe(t,r,mr)});var ke=function(t,n){var o=-1,i=_r(t)?Array(t.length):[];return ze(t,function(t,r,e){i[++o]=n(t,r,e)}),i};var Ce=function(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t};var Ie=function(t,r){if(t!==r){var e=void 0!==t,n=null===t,o=t==t,i=Yr(t),u=void 0!==r,a=null===r,c=r==r,f=Yr(r);if(!a&&!f&&!i&&r<t||i&&u&&c&&!a&&!f||n&&u&&c||!e&&c||!o)return 1;if(!n&&!i&&!f&&t<r||f&&e&&o&&!n&&!i||a&&e&&o||!u&&o||!c)return-1}return 0};var Te=function(t,r,e){for(var n=-1,o=t.criteria,i=r.criteria,u=o.length,a=e.length;++n<u;){var c=Ie(o[n],i[n]);if(c)return a<=n?c:c*("desc"==e[n]?-1:1)}return t.index-r.index};var Be=function(t,n,e){var o=-1;n=I(n.length?n:[Se],cr(Ee));var r=ke(t,function(r,t,e){return{criteria:I(n,function(t){return t(r)}),index:++o,value:r}});return Ce(r,function(t,r){return Te(t,r,e)})};var $e=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},Fe=Math.max;var Le=function(i,u,a){return u=Fe(void 0===u?i.length-1:u,0),function(){for(var t=arguments,r=-1,e=Fe(t.length-u,0),n=Array(e);++r<e;)n[r]=t[u+r];r=-1;for(var o=Array(u+1);++r<u;)o[r]=t[r];return o[u]=a(n),$e(i,this,o)}};var Me=function(t){return function(){return t}},Re=function(){try{var t=lt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),De=Re?function(t,r){return Re(t,"toString",{configurable:!0,enumerable:!1,value:Me(r),writable:!0})}:Se,Ge=Date.now;var Ve=function(e){var n=0,o=0;return function(){var t=Ge(),r=16-(t-o);if(o=t,0<r){if(800<=++n)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(De);var Ue=function(t,r){return Ve(Le(t,r,Se),t+"")},Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var We=function(t,r,e){if(!H(e))return!1;var n=void 0===r?"undefined":Ne(r);return!!("number"==n?_r(e)&&or(r,e.length):"string"==n&&r in e)&&B(e[r],t)},qe=Ue(function(t,r){if(null==t)return[];var e=r.length;return 1<e&&We(t,r[0],r[1])?r=[]:2<e&&We(r[0],r[1],r[2])&&(r=[r[0]]),Be(t,C(r,1),[])}),Ke=Array.prototype.reverse;var He=function(t){return null==t?t:Ke.call(t)};function Je(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):function(t,r){for(var e=Object.getOwnPropertyNames(r),n=0;n<e.length;n++){var o=e[n],i=Object.getOwnPropertyDescriptor(r,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,r))}var Qe=function(r){function e(t){return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}(this,r.call(this,t))}return Je(e,r),e.prototype.change=function(t){var r=[];t instanceof maptalks.VectorLayer?r=t.getGeometries():t instanceof Array&&(r=t),this.geometries=this._sortGeosByExtent(r),this._length=this.geometries.length,0<this._length&&this._doRadualChange(),delete this.geometries,delete this._length,delete this._level},e.prototype._sortGeosByExtent=function(t){var i=[],r="x"===this.options.direction.toLowerCase(),u="y"===this.options.direction.toLowerCase();if(!r&&!u)return t;t.forEach(function(t){var r=t.getExtent(),e=r.xmin,n=r.ymax,o=u?n:e;i.push({sortKey:o,geo:t})});var e=qe(i,"sortKey");u&&(e=He(e));var n=[];return e.forEach(function(t){return n.push(t.geo)}),n},e.prototype._doRadualChange=function(){var n=this,o=this.options.colors,t=o.length;if(this._level=t-1,this._length>=t){for(var r=[],e=0;e<this._level;e++)r.push(e*parseInt(this._length/this._level,0));this._getTasksIndexArrBygap(r).forEach(function(t,r){var e=n._getItemsColor(o[r],o[r+1],t.length);t.forEach(function(t,r){return n._updateGeosSymbol(n.geometries[t],e[r])})})}else this.geometries.forEach(function(t,r){return n._updateGeosSymbol(t,n.options.colors[r])})},e.prototype._getTasksIndexArrBygap=function(t){for(var r=this._length,e=[],n=[],o=0;o<r;o++)0<t.indexOf(o)&&(e.push(n),n=[]),n.push(o),o===r-1&&e.push(n);return e},e.prototype._updateGeosSymbol=function(t,r){var e=t.getType(),n={};e.includes("Point")&&(n.markerFill=r),e.includes("Line")&&(n.lineColor=r),e.includes("Polygon")&&(n.polygonFill=r,this.options.includePolygonBorder&&(n.lineColor=r)),t.updateSymbol(n)},e.prototype._getItemsColor=function(t,r,e){t=this._getColorValueArr(t),r=this._getColorValueArr(r);for(var n=[],o=t,i=o[0],u=o[1],a=o[2],c=r,f=(c[0]-i)/e,l=(c[1]-u)/e,s=(c[2]-a)/e,p=0;p<=e;p++){var y=parseInt(f*p+i,0),v=parseInt(l*p+u,0),h=parseInt(s*p+a,0);n.push("rgb("+y+","+v+","+h+")")}return n},e.prototype._getColorValueArr=function(r){var e=[];try{e=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t||a.test(t)||!c.test(t))throw new TypeError("Expected a valid hex string");var e=255;8===(t=t.replace(/^#/,"")).length&&(e=parseInt(t.slice(6,8),16)/255,t=t.substring(0,6)),4===t.length&&(e=parseInt(t.slice(3,4).repeat(2),16)/255,t=t.substring(0,3)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=parseInt(t,16),o=n>>16,i=n>>8&255,u=255&n;return"array"===r.format?[o,i,u,e]:{red:o,green:i,blue:u,alpha:e}}(r,{format:"array"})}catch(t){(r=(r=(r=r.replace(/\s+/g,"")).substr(4)).substr(0,r.length-1)).split(",").forEach(function(t){return e.push(parseInt(t,0))})}return e},e}(maptalks.Class);Qe.mergeOptions({colors:["rgb(18,194,233)","rgb(196,113,237)","rgb(246,79,105)"],direction:"y",includePolygonBorder:!1}),t.AutoGradual=Qe,Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof console&&console.log("maptalks.autogradual v0.1.0-alpha.2")});