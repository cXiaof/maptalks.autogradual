/*!
 * maptalks.autogradual v0.1.0-alpha.1
 * LICENSE : MIT
 * (c) 2016-2018 maptalks.org
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.maptalks=t.maptalks||{})}(this,function(t){"use strict";var r="a-f\\d",i=new RegExp("[^#"+r+"]","gi"),c=new RegExp("^#?[a-f\\d]{3}[a-f\\d]?$|^#?[a-f\\d]{6}([a-f\\d]{2})?$","i");var f=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,r){return t(r={exports:{}},r.exports),r.exports}var a="object"==("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)&&e&&e.Object===Object&&e,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,l=a||u||Function("return this")(),s=l.Symbol,p=Object.prototype,y=p.hasOwnProperty,v=p.toString,h=s?s.toStringTag:void 0;var b=function(t){var r=y.call(t,h),e=t[h];try{var n=!(t[h]=void 0)}catch(t){}var o=v.call(t);return n&&(r?t[h]=e:delete t[h]),o},d=Object.prototype.toString;var g=function(t){return d.call(t)},_=s?s.toStringTag:void 0;var m=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":_&&_ in Object(t)?b(t):g(t)},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var S=function(t){return null!=t&&"object"==(void 0===t?"undefined":j(t))};var w=function(t){return S(t)&&"[object Arguments]"==m(t)},O=Object.prototype,A=O.hasOwnProperty,x=O.propertyIsEnumerable,E=w(function(){return arguments}())?w:function(t){return S(t)&&A.call(t,"callee")&&!x.call(t,"callee")},z=Array.isArray,P=s?s.isConcatSpreadable:void 0;var k=function(t){return z(t)||E(t)||!!(P&&t&&t[P])};var I=function t(r,e,n,o,u){var a=-1,i=r.length;for(n||(n=k),u||(u=[]);++a<i;){var c=r[a];0<e&&n(c)?1<e?t(c,e-1,n,o,u):f(u,c):o||(u[u.length]=c)}return u};var C=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o};var T=function(){this.__data__=[],this.size=0};var $=function(t,r){return t===r||t!=t&&r!=r};var B=function(t,r){for(var e=t.length;e--;)if($(t[e][0],r))return e;return-1},F=Array.prototype.splice;var M=function(t){var r=this.__data__,e=B(r,t);return!(e<0||(e==r.length-1?r.pop():F.call(r,e,1),--this.size,0))};var R=function(t){var r=this.__data__,e=B(r,t);return e<0?void 0:r[e][1]};var D=function(t){return-1<B(this.__data__,t)};var L=function(t,r){var e=this.__data__,n=B(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function V(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}V.prototype.clear=T,V.prototype.delete=M,V.prototype.get=R,V.prototype.has=D,V.prototype.set=L;var U=V;var G=function(){this.__data__=new U,this.size=0};var N=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var W=function(t){return this.__data__.get(t)};var q=function(t){return this.__data__.has(t)},K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var H=function(t){var r=void 0===t?"undefined":K(t);return null!=t&&("object"==r||"function"==r)};var J,Q=function(t){if(!H(t))return!1;var r=m(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},X=l["__core-js_shared__"],Y=(J=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"";var Z=function(t){return!!Y&&Y in t},tt=Function.prototype.toString;var rt=function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},et=/^\[object .+?Constructor\]$/,nt=Function.prototype,ot=Object.prototype,ut=nt.toString,at=ot.hasOwnProperty,it=RegExp("^"+ut.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ct=function(t){return!(!H(t)||Z(t))&&(Q(t)?it:et).test(rt(t))};var ft=function(t,r){return null==t?void 0:t[r]};var lt=function(t,r){var e=ft(t,r);return ct(e)?e:void 0},st=lt(l,"Map"),pt=lt(Object,"create");var yt=function(){this.__data__=pt?pt(null):{},this.size=0};var vt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ht=Object.prototype.hasOwnProperty;var bt=function(t){var r=this.__data__;if(pt){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return ht.call(r,t)?r[t]:void 0},dt=Object.prototype.hasOwnProperty;var gt=function(t){var r=this.__data__;return pt?void 0!==r[t]:dt.call(r,t)};var _t=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=pt&&void 0===r?"__lodash_hash_undefined__":r,this};function mt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}mt.prototype.clear=yt,mt.prototype.delete=vt,mt.prototype.get=bt,mt.prototype.has=gt,mt.prototype.set=_t;var jt=mt;var St=function(){this.size=0,this.__data__={hash:new jt,map:new(st||U),string:new jt}},wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Ot=function(t){var r=void 0===t?"undefined":wt(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var At=function(t,r){var e=t.__data__;return Ot(r)?e["string"==typeof r?"string":"hash"]:e.map};var xt=function(t){var r=At(this,t).delete(t);return this.size-=r?1:0,r};var Et=function(t){return At(this,t).get(t)};var zt=function(t){return At(this,t).has(t)};var Pt=function(t,r){var e=At(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function kt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}kt.prototype.clear=St,kt.prototype.delete=xt,kt.prototype.get=Et,kt.prototype.has=zt,kt.prototype.set=Pt;var It=kt;var Ct=function(t,r){var e=this.__data__;if(e instanceof U){var n=e.__data__;if(!st||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new It(n)}return e.set(t,r),this.size=e.size,this};function Tt(t){var r=this.__data__=new U(t);this.size=r.size}Tt.prototype.clear=G,Tt.prototype.delete=N,Tt.prototype.get=W,Tt.prototype.has=q,Tt.prototype.set=Ct;var $t=Tt;var Bt=function(t){return this.__data__.has(t)};function Ft(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new It;++r<e;)this.add(t[r])}Ft.prototype.add=Ft.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ft.prototype.has=Bt;var Mt=Ft;var Rt=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1};var Dt=function(t,r){return t.has(r)};var Lt=function(t,r,e,n,o,u){var a=1&e,i=t.length,c=r.length;if(i!=c&&!(a&&i<c))return!1;var f=u.get(t);if(f&&u.get(r))return f==r;var l=-1,s=!0,p=2&e?new Mt:void 0;for(u.set(t,r),u.set(r,t);++l<i;){var y=t[l],v=r[l];if(n)var h=a?n(v,y,l,r,t,u):n(y,v,l,t,r,u);if(void 0!==h){if(h)continue;s=!1;break}if(p){if(!Rt(r,function(t,r){if(!Dt(p,r)&&(y===t||o(y,t,e,n,u)))return p.push(r)})){s=!1;break}}else if(y!==v&&!o(y,v,e,n,u)){s=!1;break}}return u.delete(t),u.delete(r),s},Vt=l.Uint8Array;var Ut=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Gt=function(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e},Nt=s?s.prototype:void 0,Wt=Nt?Nt.valueOf:void 0;var qt=function(t,r,e,n,o,u,a){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!u(new Vt(t),new Vt(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var i=Ut;case"[object Set]":var c=1&n;if(i||(i=Gt),t.size!=r.size&&!c)return!1;var f=a.get(t);if(f)return f==r;n|=2,a.set(t,r);var l=Lt(i(t),i(r),n,o,u,a);return a.delete(t),l;case"[object Symbol]":if(Wt)return Wt.call(t)==Wt.call(r)}return!1};var Kt=function(t,r,e){var n=r(t);return z(t)?n:f(n,e(t))};var Ht=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var a=t[e];r(a,e,t)&&(u[o++]=a)}return u};var Jt=function(){return[]},Qt=Object.prototype.propertyIsEnumerable,Xt=Object.getOwnPropertySymbols,Yt=Xt?function(r){return null==r?[]:(r=Object(r),Ht(Xt(r),function(t){return Qt.call(r,t)}))}:Jt;var Zt=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var tr=function(){return!1},rr=n(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?l.Buffer:void 0,u=(o?o.isBuffer:void 0)||tr;t.exports=u}),er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr=/^(?:0|[1-9]\d*)$/;var or=function(t,r){var e=void 0===t?"undefined":er(t);return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&nr.test(t))&&-1<t&&t%1==0&&t<r};var ur=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},ar={};ar["[object Float32Array]"]=ar["[object Float64Array]"]=ar["[object Int8Array]"]=ar["[object Int16Array]"]=ar["[object Int32Array]"]=ar["[object Uint8Array]"]=ar["[object Uint8ClampedArray]"]=ar["[object Uint16Array]"]=ar["[object Uint32Array]"]=!0,ar["[object Arguments]"]=ar["[object Array]"]=ar["[object ArrayBuffer]"]=ar["[object Boolean]"]=ar["[object DataView]"]=ar["[object Date]"]=ar["[object Error]"]=ar["[object Function]"]=ar["[object Map]"]=ar["[object Number]"]=ar["[object Object]"]=ar["[object RegExp]"]=ar["[object Set]"]=ar["[object String]"]=ar["[object WeakMap]"]=!1;var ir=function(t){return S(t)&&ur(t.length)&&!!ar[m(t)]};var cr=function(r){return function(t){return r(t)}},fr=n(function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&a.process,u=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=u}),lr=fr&&fr.isTypedArray,sr=lr?cr(lr):ir,pr=Object.prototype.hasOwnProperty;var yr=function(t,r){var e=z(t),n=!e&&E(t),o=!e&&!n&&rr(t),u=!e&&!n&&!o&&sr(t),a=e||n||o||u,i=a?Zt(t.length,String):[],c=i.length;for(var f in t)!r&&!pr.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||or(f,c))||i.push(f);return i},vr=Object.prototype;var hr=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||vr)};var br=function(r,e){return function(t){return r(e(t))}}(Object.keys,Object),dr=Object.prototype.hasOwnProperty;var gr=function(t){if(!hr(t))return br(t);var r=[];for(var e in Object(t))dr.call(t,e)&&"constructor"!=e&&r.push(e);return r};var _r=function(t){return null!=t&&ur(t.length)&&!Q(t)};var mr=function(t){return _r(t)?yr(t):gr(t)};var jr=function(t){return Kt(t,mr,Yt)},Sr=Object.prototype.hasOwnProperty;var wr=function(t,r,e,n,o,u){var a=1&e,i=jr(t),c=i.length;if(c!=jr(r).length&&!a)return!1;for(var f=c;f--;){var l=i[f];if(!(a?l in r:Sr.call(r,l)))return!1}var s=u.get(t);if(s&&u.get(r))return s==r;var p=!0;u.set(t,r),u.set(r,t);for(var y=a;++f<c;){var v=t[l=i[f]],h=r[l];if(n)var b=a?n(h,v,l,r,t,u):n(v,h,l,t,r,u);if(!(void 0===b?v===h||o(v,h,e,n,u):b)){p=!1;break}y||(y="constructor"==l)}if(p&&!y){var d=t.constructor,g=r.constructor;d!=g&&"constructor"in t&&"constructor"in r&&!("function"==typeof d&&d instanceof d&&"function"==typeof g&&g instanceof g)&&(p=!1)}return u.delete(t),u.delete(r),p},Or=lt(l,"DataView"),Ar=lt(l,"Promise"),xr=lt(l,"Set"),Er=lt(l,"WeakMap"),zr="[object Map]",Pr="[object Promise]",kr="[object Set]",Ir="[object WeakMap]",Cr="[object DataView]",Tr=rt(Or),$r=rt(st),Br=rt(Ar),Fr=rt(xr),Mr=rt(Er),Rr=m;(Or&&Rr(new Or(new ArrayBuffer(1)))!=Cr||st&&Rr(new st)!=zr||Ar&&Rr(Ar.resolve())!=Pr||xr&&Rr(new xr)!=kr||Er&&Rr(new Er)!=Ir)&&(Rr=function(t){var r=m(t),e="[object Object]"==r?t.constructor:void 0,n=e?rt(e):"";if(n)switch(n){case Tr:return Cr;case $r:return zr;case Br:return Pr;case Fr:return kr;case Mr:return Ir}return r});var Dr=Rr,Lr="[object Arguments]",Vr="[object Array]",Ur="[object Object]",Gr=Object.prototype.hasOwnProperty;var Nr=function(t,r,e,n,o,u){var a=z(t),i=z(r),c=a?Vr:Dr(t),f=i?Vr:Dr(r),l=(c=c==Lr?Ur:c)==Ur,s=(f=f==Lr?Ur:f)==Ur,p=c==f;if(p&&rr(t)){if(!rr(r))return!1;l=!(a=!0)}if(p&&!l)return u||(u=new $t),a||sr(t)?Lt(t,r,e,n,o,u):qt(t,r,c,e,n,o,u);if(!(1&e)){var y=l&&Gr.call(t,"__wrapped__"),v=s&&Gr.call(r,"__wrapped__");if(y||v){var h=y?t.value():t,b=v?r.value():r;return u||(u=new $t),o(h,b,e,n,u)}}return!!p&&(u||(u=new $t),wr(t,r,e,n,o,u))};var Wr=function t(r,e,n,o,u){return r===e||(null==r||null==e||!S(r)&&!S(e)?r!=r&&e!=e:Nr(r,e,n,o,t,u))};var qr=function(t,r,e,n){var o=e.length,u=o,a=!n;if(null==t)return!u;for(t=Object(t);o--;){var i=e[o];if(a&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<u;){var c=(i=e[o])[0],f=t[c],l=i[1];if(a&&i[2]){if(void 0===f&&!(c in t))return!1}else{var s=new $t;if(n)var p=n(f,l,c,t,r,s);if(!(void 0===p?Wr(l,f,3,n,s):p))return!1}}return!0};var Kr=function(t){return t==t&&!H(t)};var Hr=function(t){for(var r=mr(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,Kr(o)]}return r};var Jr=function(r,e){return function(t){return null!=t&&t[r]===e&&(void 0!==e||r in Object(t))}};var Qr=function(r){var e=Hr(r);return 1==e.length&&e[0][2]?Jr(e[0][0],e[0][1]):function(t){return t===r||qr(t,r,e)}},Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Yr=function(t){return"symbol"==(void 0===t?"undefined":Xr(t))||S(t)&&"[object Symbol]"==m(t)},Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/;var ee=function(t,r){if(z(t))return!1;var e=void 0===t?"undefined":Zr(t);return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Yr(t))||re.test(t)||!te.test(t)||null!=r&&t in Object(r)},ne="Expected a function";function oe(u,a){if("function"!=typeof u||null!=a&&"function"!=typeof a)throw new TypeError(ne);var t=function t(){var r=arguments,e=a?a.apply(this,r):r[0],n=t.cache;if(n.has(e))return n.get(e);var o=u.apply(this,r);return t.cache=n.set(e,o)||n,o};return t.cache=new(oe.Cache||It),t}oe.Cache=It;var ue=oe;var ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/\\(\\)?/g,ce=function(t){var r=ue(t,function(t){return 500===e.size&&e.clear(),t}),e=r.cache;return r}(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(ae,function(t,r,e,n){o.push(e?n.replace(ie,"$1"):r||t)}),o}),fe=1/0,le=s?s.prototype:void 0,se=le?le.toString:void 0;var pe=function t(r){if("string"==typeof r)return r;if(z(r))return C(r,t)+"";if(Yr(r))return se?se.call(r):"";var e=r+"";return"0"==e&&1/r==-fe?"-0":e};var ye=function(t){return null==t?"":pe(t)};var ve=function(t,r){return z(t)?t:ee(t,r)?[t]:ce(ye(t))};var he=function(t){if("string"==typeof t||Yr(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var be=function(t,r){for(var e=0,n=(r=ve(r,t)).length;null!=t&&e<n;)t=t[he(r[e++])];return e&&e==n?t:void 0};var de=function(t,r,e){var n=null==t?void 0:be(t,r);return void 0===n?e:n};var ge=function(t,r){return null!=t&&r in Object(t)};var _e=function(t,r,e){for(var n=-1,o=(r=ve(r,t)).length,u=!1;++n<o;){var a=he(r[n]);if(!(u=null!=t&&e(t,a)))break;t=t[a]}return u||++n!=o?u:!!(o=null==t?0:t.length)&&ur(o)&&or(a,o)&&(z(t)||E(t))};var me=function(t,r){return null!=t&&_e(t,r,ge)};var je=function(e,n){return ee(e)&&Kr(n)?Jr(he(e),n):function(t){var r=de(t,e);return void 0===r&&r===n?me(t,e):Wr(n,r,3)}};var Se=function(t){return t};var we=function(r){return function(t){return null==t?void 0:t[r]}};var Oe=function(r){return function(t){return be(t,r)}};var Ae=function(t){return ee(t)?we(he(t)):Oe(t)},xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Ee=function(t){return"function"==typeof t?t:null==t?Se:"object"==(void 0===t?"undefined":xe(t))?z(t)?je(t[0],t[1]):Qr(t):Ae(t)};var ze=function(c){return function(t,r,e){for(var n=-1,o=Object(t),u=e(t),a=u.length;a--;){var i=u[c?a:++n];if(!1===r(o[i],i,o))break}return t}}();var Pe=function(u,a){return function(t,r){if(null==t)return t;if(!_r(t))return u(t,r);for(var e=t.length,n=a?e:-1,o=Object(t);(a?n--:++n<e)&&!1!==r(o[n],n,o););return t}}(function(t,r){return t&&ze(t,r,mr)});var ke=function(t,n){var o=-1,u=_r(t)?Array(t.length):[];return Pe(t,function(t,r,e){u[++o]=n(t,r,e)}),u};var Ie=function(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t};var Ce=function(t,r){if(t!==r){var e=void 0!==t,n=null===t,o=t==t,u=Yr(t),a=void 0!==r,i=null===r,c=r==r,f=Yr(r);if(!i&&!f&&!u&&r<t||u&&a&&c&&!i&&!f||n&&a&&c||!e&&c||!o)return 1;if(!n&&!u&&!f&&t<r||f&&e&&o&&!n&&!u||i&&e&&o||!a&&o||!c)return-1}return 0};var Te=function(t,r,e){for(var n=-1,o=t.criteria,u=r.criteria,a=o.length,i=e.length;++n<a;){var c=Ce(o[n],u[n]);if(c)return i<=n?c:c*("desc"==e[n]?-1:1)}return t.index-r.index};var $e=function(t,n,e){var o=-1;n=C(n.length?n:[Se],cr(Ee));var r=ke(t,function(r,t,e){return{criteria:C(n,function(t){return t(r)}),index:++o,value:r}});return Ie(r,function(t,r){return Te(t,r,e)})};var Be=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},Fe=Math.max;var Me=function(u,a,i){return a=Fe(void 0===a?u.length-1:a,0),function(){for(var t=arguments,r=-1,e=Fe(t.length-a,0),n=Array(e);++r<e;)n[r]=t[a+r];r=-1;for(var o=Array(a+1);++r<a;)o[r]=t[r];return o[a]=i(n),Be(u,this,o)}};var Re=function(t){return function(){return t}},De=function(){try{var t=lt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Le=De?function(t,r){return De(t,"toString",{configurable:!0,enumerable:!1,value:Re(r),writable:!0})}:Se,Ve=Date.now;var Ue=function(e){var n=0,o=0;return function(){var t=Ve(),r=16-(t-o);if(o=t,0<r){if(800<=++n)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(Le);var Ge=function(t,r){return Ue(Me(t,r,Se),t+"")},Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var We=function(t,r,e){if(!H(e))return!1;var n=void 0===r?"undefined":Ne(r);return!!("number"==n?_r(e)&&or(r,e.length):"string"==n&&r in e)&&$(e[r],t)},qe=Ge(function(t,r){if(null==t)return[];var e=r.length;return 1<e&&We(t,r[0],r[1])?r=[]:2<e&&We(r[0],r[1],r[2])&&(r=[r[0]]),$e(t,I(r,1),[])}),Ke=Array.prototype.reverse;var He=function(t){return null==t?t:Ke.call(t)};function Je(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):function(t,r){for(var e=Object.getOwnPropertyNames(r),n=0;n<e.length;n++){var o=e[n],u=Object.getOwnPropertyDescriptor(r,o);u&&u.configurable&&void 0===t[o]&&Object.defineProperty(t,o,u)}}(t,r))}var Qe=function(r){function e(t){return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}(this,r.call(this,t))}return Je(e,r),e.prototype.change=function(t){this.layer=t,this.map=t.getMap(),this.geometries=this._sortGeosByExtent(t.getGeometries()),this._length=this.geometries.length,0<this._length&&this._doRadualChange()},e.prototype._sortGeosByExtent=function(t){var u=[],r="x"===this.options.direction.toLowerCase(),a="y"===this.options.direction.toLowerCase();if(!r&&!a)return t;t.forEach(function(t){var r=t.getExtent(),e=r.xmin,n=r.ymax,o=a?n:e;u.push({sortKey:o,geo:t})});var e=qe(u,"sortKey");a&&(e=He(e));var n=[];return e.forEach(function(t){return n.push(t.geo)}),n},e.prototype._doRadualChange=function(){var n=this,o=this.options.colors,t=o.length;if(this._level=t-1,this._length>=t){for(var r=[],e=0;e<this._level;e++)r.push(e*parseInt(this._length/this._level,0));var u=this._getTasksIndexArrBygap(r);console.log(u),u.forEach(function(t,r){var e=n._getItemsColor(o[r],o[r+1],t.length);console.log(e)})}else this.geometries.forEach(function(t,r){return t.updateSymbol({polygonFill:n.options.colors[r]})})},e.prototype._getTasksIndexArrBygap=function(t){for(var r=this._length,e=[],n=[],o=0;o<r;o++)0<t.indexOf(o)&&(e.push(n),n=[]),n.push(o),o===r-1&&e.push(n);return e},e.prototype._getItemsColor=function(t,r,e){t=this._getColorValueArr(t),r=this._getColorValueArr(r);for(var n=[],o=t,u=o[0],a=o[1],i=o[2],c=r,f=(c[0]-u)/e,l=(c[1]-a)/e,s=(c[2]-i)/e,p=0;p<=e;p++){var y=parseInt(f*p+u,0),v=parseInt(l*p+a,0),h=parseInt(s*p+i,0);n.push("rgb("+y+","+v+","+h+")")}return n},e.prototype._getColorValueArr=function(r){var e=[];try{e=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t||i.test(t)||!c.test(t))throw new TypeError("Expected a valid hex string");var e=255;8===(t=t.replace(/^#/,"")).length&&(e=parseInt(t.slice(6,8),16)/255,t=t.substring(0,6)),4===t.length&&(e=parseInt(t.slice(3,4).repeat(2),16)/255,t=t.substring(0,3)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=parseInt(t,16),o=n>>16,u=n>>8&255,a=255&n;return"array"===r.format?[o,u,a,e]:{red:o,green:u,blue:a,alpha:e}}(r,{format:"array"})}catch(t){(r=(r=(r=r.replace(/\s+/g,"")).substr(4)).substr(0,r.length-1)).split(",").forEach(function(t){return e.push(parseInt(t,0))})}return e},e}(maptalks.Class);Qe.mergeOptions({colors:["rgb(18,194,233)","rgb(196,113,237)","rgb(246,79,105)"],direction:"y"}),t.AutoGradual=Qe,Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof console&&console.log("maptalks.autogradual v0.1.0-alpha.1")});